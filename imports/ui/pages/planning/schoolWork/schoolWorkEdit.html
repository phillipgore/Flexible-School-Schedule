<template name="schoolWorkEdit">
	
	<main class="app-content app-content-preceeds-toolbar app-content-form">
		<form class="js-form-school-work-update row">

			<h2 class="m-tn-b-9">Step 1: Information</h2>
			<label class="m-tn-b-3">Student</label>
			<h3 class="m-tn-b-9">{{selectedStudent.preferredFirstName.name}} {{selectedStudent.lastName}}</h3>
			<div class="well bg-gray-lighter m-tn-b-18">
				<label>School Work Name</label>
				<input type="text" name="name" id="name" placeholder="Math" autocomplete="off" value="{{selectedSchoolWork.name}}">
				<label>Descripton</label>
				{{> editor placeholder="Learn basic mathematics..." existingContent=selectedSchoolWork.description}}
			</div>

			<h2 class="m-tn-t-36 m-tn-b-9">Step 2: Resources</h2>
			<label>Search To Attach Resources</label>
			<div class="pos-relative">
				<div class="icn-overlay">
					<input type="text" name="searchResources" id="search-resources" placeholder="Search Resources" autocomplete="off">
					<div class="icn-left">
						{{#if searching}}
						<i class="fss-searching fss-spin"></i>
						{{else}}
						<i class="fss-search"></i>
						{{/if}}
					</div>
					<a href="#" class="js-clear-search icn-right">
						<div class="btn btn-circle bg-danger small">
							<i class="fss-close"></i>
						</div>
					</a>
				</div>
				
				{{#if query}}
				<ul class="list list-search-results">
					{{#each resource in resources}}
					<li class="list-item">
						<div class="list-item-inner p-tn-rl-9">
							<div class="list-item-icon"><i class="fss-{{resource.type}} txt-primary"></i></div>
							<div class="list-item-label txt-ellipsis">{{resource.title}}</div>
							<div class="list-item-btn">
								<a id="{{resource._id}}" href="#" class="js-add-resource btn btn-circle small">
									<i class="fss-new"></i>
								</a>
							</div>
						</div>
					</li>
					{{else}}
					<li class="list-item p-tn-rl-9">
						<div class="list-item-inner">No Results.</div>
					</li>
					{{/each}}
				</ul>
				{{/if}}
			</div>

			<div class="well bg-gray-lighter p-tn-b-0 m-tn-b-18">
				<label class="m-tn-b-9">Attached Resources</label>
				<ul class="list">
					{{#each resource in localResources}}
					<li class="list-item">
						<div class="list-item-inner dark-border top-border p-tn-rl-9 m-tn-rl-neg-9">
							<input type="hidden" name="resourceId" id="resource-id" value="{{resource.id}}">
							<div class="list-item-icon"><i class="fss-{{resource.type}} txt-primary"></i></div>
							<div class="list-item-label">{{resource.title}}</div>
							<div class="list-item-btn">
								<a id="{{resource.id}}" href="#" class="js-remove-resource btn btn-circle bg-danger small">
									<i class="fss-close"></i>
								</a>
							</div>
						</div>
					</li>
					{{else}}
					<li class="list-item">
						<div class="list-item-inner dark-border top-border txt-tn-center p-tn-rl-9 m-tn-rl-neg-9">
							No Attached Resources
						</div>
					</li>
					{{/each}}
				</ul>
			</div>

			<h2 class="m-tn-t-36 m-tn-b-9">Step 3: Schedule</h2>
			<label class="m-tn-b-3">School Year</label>
			<h3 class="m-tn-b-9">{{selectedSchoolYear.startYear}}-{{selectedSchoolYear.endYear}}</h3>
			{{#each term in terms}}
			<div id="{{term._id}}" class="well bg-gray-lighter m-tn-b-9">
				<h3 class="m-tn-b-9">Term {{term.order}}</h3>
				<label>{{weekCount term._id}} Weeks</label>
				<div class="fss-select">
					<select data-term-id="{{term._id}}" class="js-times-per-week-preset" name="timesPerWeekPreset" id="times-per-week-preset">
						<option {{isSelected term._id 'random'}} disabled value>Random Times Per Week</option>
						<option {{isSelected term._id 0}} value="">0 Times Per Week</option>
						<option {{isSelected term._id 1}} value="1">1 Time Per Week</option>
						<option {{isSelected term._id 2}} value="2">2 Times Per Week</option>
						<option {{isSelected term._id 3}} value="3">3 Times Per Week</option>
						<option {{isSelected term._id 4}} value="4">4 Times Per Week</option>
						<option {{isSelected term._id 5}} value="5">5 Times Per Week</option>
						<option {{isSelected term._id 6}} value="6">6 Times Per Week</option>
						<option {{isSelected term._id 7}} value="7">7 Times Per Week</option>
					</select>
				</div>
				<button id="{{term.order}}" class="js-show-individual-weeks btn-gray-dark btn-block extra-small">
					<span class="js-label-{{term.order}} {{#if isRandom term._id}}hide{{/if}}">Show</span>
					<span class="js-label-{{term.order}} {{#unless isRandom term._id}}hide{{/unless}}">Hide</span> Individual Weeks
				</button>
				<div class="js-{{term.order}} row m-tn-rl-neg-3 m-tn-b-neg-6 m-tn-t-9 {{#unless isRandom term._id}}hide{{/unless}}">
					{{#each week in weeks term._id}}
					<div class="col-tn-1of5 p-tn-rl-3">
						<label>Wk {{week.order}}</label>
						<input data-term-id="{{term._id}}" data-week-id="{{week._id}}" class="js-times-per-week" type="text" name="timesPerWeek" placeholder="5" autocomplete="off" maxlength="2" value="{{lessonCount week._id}}">
					</div>
					{{/each}}
				</div>
			</div>
			{{/each}}

			<footer class="toolbar toolbar-bottom toolbar-gray m-tn-t-27">
				<a href="{{cancelPath}}" class="btn btn-gray-darker fl-tn-left">Cancel</a>
				<button type="submit" class="js-submit fl-tn-right">Update</button>
			</footer>
		</form>
	</main>
	{{#unless subscriptionReady}}
		{{> loading}}
	{{/unless}}
	{{> updating}}
</template>