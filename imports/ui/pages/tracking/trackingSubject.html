<template name="trackingSubject">
	{{#each subject in subjects}}
		<div class="js-subject-track track p-tn-t-18">
			<div class="clearfix m-tn-h-9 m-tn-b-0">
				<div class="col-tn-7of9">
					<div class="track-icon"><i class="txt-primary fss-subjects"></i></div>
					<div class="track-label txt-ellipsis">{{subject.name}}</div>
				</div>
				<div class="col-tn-2of9">
					<button id="{{subject._id}}" class="js-show-subject-info width-64 tiny fl-tn-right">
						<span class="js-show js-label-{{subject._id}}">Show</span><span class="js-hide js-label-{{subject._id}} hide">Hide</span> Info
					</button>
				</div>
			</div>
			<div class="js-{{subject._id}} js-info view-info tracking-view p-tn-18 m-tn-h-9 m-tn-t-6 m-tn-b-18 hide">
				{{#if subjectInfoReady}}
					{{#if subject.description.length}}
						<section>
							<label>Description</label>
							{{{subject.description}}}
						</section>
					{{/if}}

					{{#if subject.resources.length}}
						<section>
							<label class="p-tn-b-12">Resources</label>
							<ul class="info-list">
								{{#each resource in resources subject.resources}}
									<li class="txt-ellipsis p-tn-b-3"><i class="fss-{{resource.type}} txt-primary"></i> {{resource.title}}</li>
								{{/each}}
							</ul>
						</section>
					{{/if}}
				{{else}}
					<p class="txt-gray-darkest">Information Loading...</p>
				{{/if}}
			</div>
			<div class="row track-btn-container m-tn-h-9">
				{{#each lesson in lessons subject._id}}
					<button data-lesson-id="{{lesson._id}}" class="js-lesson-btn col-tn-1of{{lessonCount subject._id}} {{lessonStatus lesson.assigned lesson.completed subject._id}}">
						<div class="js-lesson-updating hide">
							<div class="loader-icon loader-icon-tn loader-icon-center"></div>
						</div>
					</button>
				{{/each}}
			</div>
			{{#each lesson in lessons subject._id}}
				<div id="{{lesson._id}}" class="js-lesson-input track-input">
					<div class="row m-tn-h-9">
						<div class="track-arrow offset-tn-{{lessonPosition subject._id lesson._id}}of{{lessonCount subject._id}} col-tn-1of{{lessonCount subject._id}}">
						</div>
					</div>
					
					<form id="js-form-{{lesson._id}}" class="js-form-lessons-update track-form">
						<div class="row checkbox-collection p-tn-t-6">
							<div class="col-tn-1of2">
								<label class="checkbox">
									<input class="js-assigned-checkbox" type="checkbox" name="assigned" value="{{lesson.assigned}}" checked="{{lesson.assigned}}">
									<div class="checkbox-icon"></div> 
									<div class="checkbox-label">Do Next</div>
								</label>
							</div>
							<div class="col-tn-1of2">
								<label class="checkbox fl-tn-right">
									<input class="js-completed-checkbox" type="checkbox" name="completed" value="{{lesson.completed}}" checked="{{lesson.completed}}">
									<div class="checkbox-icon"></div> 
									<div class="checkbox-label">Complete</div>
								</label>
							</div>
						</div>

						<label>Completion Date</label>
						<input type="text" id="completed-on-{{lesson._id}}" name="completedOn" class="js-completed-on" placeholder="{{dateFormat todaysDate}}" value="{{dateFormat todaysDate}}">
						<label>Completion Time</label>
						<div class="row">
							<div class="col-tn-1of5">
								<input type="text" name="completionTime" id="completion-time" placeholder="30" autocomplete="off" value="{{lesson.completionTime}}">
							</div>
							<div class="col-tn-4of5 font-weight-normal p-tn-l-6 p-tn-t-9">Minutes</div>
						</div>
						<label>Descripton</label>
						{{> editor classes="m-tn-b-18" placeholder="In this session we..." existingContent=lesson.description}}
						
						<footer class="toolbar toolbar-bottom toolbar-gray">
							<button data-close-id="{{lesson._id}}" class="js-close btn btn-gray-darker fl-tn-left">Cancel</button>
							<button type="submit" class="js-submit fl-tn-right">Update</button>
						</footer>
					</form>
				</div>
			{{/each}}
		</div>
	{{/each}}
</template>